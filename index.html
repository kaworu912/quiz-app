<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>å¤šç§‘ç›®ç­”é¡Œç³»çµ±</title>
  <style>
    body {
      font-family: sans-serif;
      font-size: 14px;
      padding: 10px;
      line-height: 1.6;
      max-width: 600px;
      margin: auto;
    }
    h2 {
      font-size: 14px;
    }
    label, select {
      font-size: 14px;
    }
    select, button {
      padding: 6px 10px;
      margin: 8px 0;
      border-radius: 4px;
      border: 1px solid #ccc;
      cursor: pointer;
      font-size: 14px;
    }
    .question-box {
      margin-top: 20px;
      font-size: 18px;
    }
    .option {
      display: block;
      margin: 8px 0;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 5px;
      background-color: #f9f9f9;
      cursor: pointer;
      font-size: 18px;
      user-select: none;
    }
    .option.correct {
      background-color: #e2f7e1; /* æ·ºç¶ è‰² */
      border-color: #c3e6cb;
    }
    .option.incorrect {
      background-color: #f8d7da;
      border-color: #f5c6cb;
    }
    #result {
      margin-top: 15px;
      font-size: 14px;
    }
    #score {
      margin-top: 5px;
      font-size: 14px;
    }
    .button-group {
      margin-top: 10px;
      display: flex;
      gap: 180px; /* æŒ‰éˆ•é–“è· */
    }
  </style>
</head>
<body>
  <h2>ç­”é¡Œç³»çµ±ï¼ˆéš¨æ©Ÿ50é¡Œï¼‰</h2>

  <label for="subject-select">è«‹é¸æ“‡ç§‘ç›®ï¼š</label>
  <select id="subject-select">
    <option value="ç›£ç„è¡Œåˆ‘æ³•">ç›£ç„è¡Œåˆ‘æ³•</option>
    <option value="åˆ‘æ³•">åˆ‘æ³•</option>
    <option value="æ³•å­¸ç·’è«–">æ³•å­¸ç·’è«–</option>
    <option value="çŠ¯ç½ªå­¸">çŠ¯ç½ªå­¸</option>
    <option value="ç›£ç„å­¸">ç›£ç„å­¸</option>
  </select>

  <div class="question-box" id="question-box"></div>
  <div id="result"></div>
  <div id="score"></div>
  <div class="button-group">
    <button id="next-btn" onclick="nextQuestion()">ä¸‹ä¸€é¡Œ</button>
    <button onclick="resetQuiz()">é‡æ–°é–‹å§‹</button>
  </div>

  <script>
    const questionBanks = {
      "ç›£ç„è¡Œåˆ‘æ³•": [
        {
          question: "ç›¸è¼ƒæ–¼å‚³çµ±ç›£ç„è¡Œåˆ‘ä¹‹ç›®çš„ï¼Œå½°é¡¯ç¾è¡Œç›£ç„è¡Œåˆ‘æ³•ã€Œç¬¬ 1 æ¢ã€ä¹‹åŸºæœ¬ç²¾ç¥åŠå…¶ç«‹æ³•ä¹‹ã€Œç©æ¥µç›®çš„ã€ ï¼Œä¸‹åˆ—çµ„åˆä½•è€…æ­£ç¢ºï¼Ÿ",
          options: ["ä¿®å¾©ã€åš‡é˜»", "éš”é›¢ã€æ‡‰å ±", "çŸ¯æ²»ã€æ•™åŒ–", "æ‡²ç½°ã€ç—›è‹¦"],
          answer: 2,
          explanation: ""
        },
        {
          question: "ç”±ç›£ç„è¡Œåˆ‘æ³•ç¬¬ä¸‰æ¢ä¹‹è¦å®šä¸­ï¼Œå¯çŸ¥ä¸‹åˆ—ä½•è€…ç‚ºç›£ç„ä¸­åŸ·è¡Œä¹‹ä¾‹å¤–ï¼Ÿ",
          options: ["æ‹˜å½¹", "æœ‰æœŸå¾’åˆ‘", "ç„¡æœŸå¾’åˆ‘", "æ­»åˆ‘"],
          answer: 3,
          explanation: "ç›£ç„ç‚ºåŸ·è¡Œè‡ªç”±åˆ‘ä¹‹å ´æ‰€ï¼Œå¾’åˆ‘æ‹˜å½¹ç‚ºè‡ªç”±åˆ‘ã€‚æ­»åˆ‘ä¸¦éè‡ªç”±åˆ‘ã€‚"
        },
        {
          question: "ä¾æ“šç›£ç„è¡Œåˆ‘æ³•ï¼Œä¸‹åˆ—æ•˜è¿°ä½•è€…éŒ¯èª¤ï¼Ÿ",
          options: ["ç›£ç„è¡Œåˆ‘æ³•ä¹‹ä¸»ç®¡æ©Ÿé—œç‚ºæ³•å‹™éƒ¨", "ç›£ç„ä¹‹ç›£ç£æ©Ÿé—œç‚ºæ³•å‹™éƒ¨çŸ¯æ­£ç½²", "ç›£ç„ä¹‹ç›£ç£æ©Ÿé—œæ‡‰æ´¾å“¡è¦–å¯Ÿç›£ç„ï¼Œæ¯æœˆè‡³å°‘ä¸€æ¬¡", "å°‘å¹´æ³•é™¢æ³•å®˜ã€æª¢å¯Ÿå®˜åŸ·è¡Œåˆ‘ç½°æœ‰é—œäº‹é …ï¼Œå¾—éš¨æ™‚è¨ªè¦–å°‘å¹´çŸ¯æ­£å­¸æ ¡ã€ç›£ç„"],
          answer: 2,
          explanation: "æ ¹æ“šã€Šç›£ç„è¡Œåˆ‘æ³•ã€‹ï¼Œç›£ç£æ©Ÿé—œæ‡‰æ´¾å“¡è¦–å¯Ÿç›£ç„ï¼Œæ¯å­£è‡³å°‘ä¸€æ¬¡ã€‚"
        }
      ],
      "åˆ‘æ³•": [
        {
          question: "åˆ‘æ³•ä¸Šæ‰€è¬‚çš„æ•…æ„ï¼Œæ˜¯æŒ‡è¡Œç‚ºäººå°æ–¼æ§‹æˆè¦ä»¶è©²ç•¶äº‹å¯¦å…·æœ‰ä½•ç¨®å¿ƒç†ç‹€æ…‹ï¼Ÿ",
          options: ["ç–å¿½", "æ˜çŸ¥ä¸¦å¸Œæœ›", "ä¸çŸ¥æƒ…", "éå¤±"],
          answer: 1,
          explanation: "åˆ‘æ³•ä¸­çš„æ•…æ„ï¼ŒåŒ…å«ç›´æ¥æ•…æ„èˆ‡é–“æ¥æ•…æ„ï¼Œçš†éœ€æœ‰æ˜çŸ¥ä¸”å¸Œæœ›æˆ–æ”¾ä»»ã€‚"
        }
      ],
      "æ³•å­¸ç·’è«–": [
        {
          question: "ä¸‹åˆ—ä½•è€…éå±¬æ³•å¾‹çš„ç‰¹å¾µï¼Ÿ",
          options: ["æ™®éæ€§", "å¼·åˆ¶æ€§", "åœ°æ–¹æ€§", "è¦ç¯„æ€§"],
          answer: 2,
          explanation: "æ³•å¾‹å…·å‚™æ™®éã€è¦ç¯„ã€å¼·åˆ¶ç­‰ç‰¹æ€§ï¼Œåœ°æ–¹æ€§éæœ¬è³ªç‰¹å¾µã€‚"
        }
      ],
      "çŠ¯ç½ªå­¸": [
        {
          question: "å·®åˆ¥æ¥è§¸ç†è«–çš„é‡é»åœ¨æ–¼ï¼Ÿ",
          options: ["ç”Ÿç†å› ç´ ", "å®¶åº­æ•™é¤Š", "èˆ‡çŠ¯ç½ªè€…äº’å‹•", "éºå‚³å½±éŸ¿"],
          answer: 2,
          explanation: "å·®åˆ¥æ¥è§¸ç†è«–èªç‚ºèˆ‡çŠ¯ç½ªè€…é »ç¹äº’å‹•æœƒå­¸ç¿’åˆ°çŠ¯ç½ªè¡Œç‚ºã€‚"
        }
      ],
      "ç›£ç„å­¸": [
        {
          question: "ç›£ç„å­¸ä¸­ï¼Œæ”¹é©æ´¾ç›£ç„çš„é‡é»ç‚ºä½•ï¼Ÿ",
          options: ["å¼·èª¿éš”é›¢", "å¼·èª¿å ±å¾©", "é‡è¦–æ•™è‚²èˆ‡æ”¹é€ ", "åŸ·è¡Œæ­»åˆ‘"],
          answer: 2,
          explanation: "æ”¹é©æ´¾å¼·èª¿æ•™è‚²ã€å·¥ä½œåŠæ”¹é€ å—åˆ‘äººï¼Œä½¿å…¶å¾©æ­¸ç¤¾æœƒã€‚"
        }
      ]
    };

    const maxQuestions = 50;  // ç­”é¡Œé™åˆ¶50é¡Œ

    let currentSubject = "ç›£ç„è¡Œåˆ‘æ³•";
    let currentQuestions = [];
    let currentQuestionIndex = 0;
    let correctCount = 0;
    let wrongCount = 0;
    let completedCount = 0;
    let scorePoints = 0;
    let quizEnded = false;

    const subjectSelect = document.getElementById("subject-select");
    const questionBox = document.getElementById("question-box");
    const result = document.getElementById("result");
    const score = document.getElementById("score");
    const nextBtn = document.getElementById("next-btn");

    subjectSelect.addEventListener("change", function () {
      currentSubject = this.value;
      resetQuiz();
    });

    function loadQuestions() {
      // å¾è©²ç§‘ç›®é¡Œåº«è¤‡è£½é¡Œç›®
      currentQuestions = [...questionBanks[currentSubject]];
      shuffleArray(currentQuestions);

      // å¦‚æœé¡Œç›®æ•¸å°‘æ–¼50é¡Œï¼Œé‡è¤‡åˆä½µè£œè¶³è‡³50é¡Œ
      while(currentQuestions.length < maxQuestions){
        currentQuestions = currentQuestions.concat([...questionBanks[currentSubject]]);
        shuffleArray(currentQuestions);
      }
      // å–å‰50é¡Œ
      currentQuestions = currentQuestions.slice(0, maxQuestions);

      currentQuestionIndex = 0;
      correctCount = 0;
      wrongCount = 0;
      completedCount = 0;
      scorePoints = 0;
      quizEnded = false;
      nextBtn.disabled = false;
      showQuestion();
    }

    function showQuestion() {
      questionBox.innerHTML = "";
      result.textContent = "";
      updateScore();

      if (quizEnded) {
        questionBox.innerHTML = `<p>ç­”é¡ŒçµæŸï¼ç¸½åˆ†ï¼š${scorePoints} åˆ† (æ¯é¡Œç­”å°å¾— 2 åˆ†)</p>`;
        return;
      }

      if (currentQuestionIndex >= currentQuestions.length) {
        // å®‰å…¨å‚™æ¡ˆï¼šç†è«–ä¸Šä¸æœƒè¶…é maxQuestions
        questionBox.innerHTML = "<p>æœ¬ç§‘ç›®é¡Œç›®å·²å®Œæˆã€‚</p>";
        return;
      }

      const q = currentQuestions[currentQuestionIndex];
      const questionEl = document.createElement("div");
      questionEl.innerHTML = `<strong>Q${currentQuestionIndex + 1}ï¼š</strong>${q.question}`;
      questionBox.appendChild(questionEl);

      const optionIndexes = [0, 1, 2, 3];
      shuffleArray(optionIndexes);

      optionIndexes.forEach(i => {
        const btn = document.createElement("div");
        btn.className = "option";
        btn.textContent = q.options[i];
        btn.addEventListener("click", () => {
          if (quizEnded) return;
          const allOptions = document.querySelectorAll(".option");
          allOptions.forEach(el => el.style.pointerEvents = "none");

          if (i === q.answer) {
            btn.classList.add("correct");
            correctCount++;
            scorePoints += 2; // ç­”å°åŠ 2åˆ†
          } else {
            btn.classList.add("incorrect");
            allOptions[q.answer].classList.add("correct");
            wrongCount++;
            // ç­”éŒ¯ä¸æ‰£åˆ†
          }

          completedCount++;
          result.innerHTML = `<small>è§£æï¼š${q.explanation}</small>`;
          updateScore();

          // ç­”æ»¿50é¡Œå°±çµæŸ
          if(completedCount >= maxQuestions){
            quizEnded = true;
            nextBtn.disabled = true;
            questionBox.innerHTML = `<p>ç­”é¡ŒçµæŸï¼ç¸½åˆ†ï¼š${scorePoints} åˆ† (æ¯é¡Œç­”å°å¾— 2 åˆ†)</p>`;
          }
        });
        questionBox.appendChild(btn);
      });
    }

    function nextQuestion() {
      if (quizEnded) {
        alert("ç­”é¡Œå·²çµæŸï¼Œè«‹é»ã€Œé‡æ–°é–‹å§‹ã€é‡æ–°é–‹å§‹ã€‚");
        return;
      }
      if(currentQuestionIndex < currentQuestions.length - 1){
        currentQuestionIndex++;
        showQuestion();
      } else {
        alert("å·²å®Œæˆæ‰€æœ‰é¡Œç›®");
      }
    }

    function resetQuiz() {
      loadQuestions();
    }

    function updateScore() {
      score.textContent = `âœ”ï¸ ç­”å°ï¼š${correctCount} é¡Œã€€âŒ ç­”éŒ¯ï¼š${wrongCount} é¡Œã€€ğŸ“˜ å·²å®Œæˆ ${completedCount}/${maxQuestions}`;
    }

    function shuffleArray(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }

    loadQuestions();
  </script>
</body>
</html>
