<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>多科目答題系統</title>
  <style>
    body {
      font-family: sans-serif;
      font-size: 14px;
      padding: 10px;
      line-height: 1.6;
      max-width: 600px;
      margin: auto;
    }
    h2 {
      font-size: 14px;
    }
    label, select {
      font-size: 14px;
    }
    select, button {
      padding: 6px 10px;
      margin: 8px 0;
      border-radius: 4px;
      border: 1px solid #ccc;
      cursor: pointer;
      font-size: 14px;
    }
    .question-box {
      margin-top: 20px;
      font-size: 18px;
    }
    .option {
      display: block;
      margin: 8px 0;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 5px;
      background-color: #f9f9f9;
      cursor: pointer;
      font-size: 18px;
      user-select: none;
    }
    .option.correct {
      background-color: #e2f7e1; /* 淺綠色 */
      border-color: #c3e6cb;
    }
    .option.incorrect {
      background-color: #f8d7da;
      border-color: #f5c6cb;
    }
    #result {
      margin-top: 15px;
      font-size: 14px;
    }
    #score {
      margin-top: 5px;
      font-size: 14px;
    }
    .button-group {
      margin-top: 10px;
      display: flex;
      gap: 180px; /* 按鈕間距 */
    }
  </style>
</head>
<body>
  <h2>答題系統（隨機50題）</h2>

  <label for="subject-select">請選擇科目：</label>
  <select id="subject-select">
    <option value="監獄行刑法">監獄行刑法</option>
    <option value="刑法">刑法</option>
    <option value="法學緒論">法學緒論</option>
    <option value="犯罪學">犯罪學</option>
    <option value="監獄學">監獄學</option>
  </select>

  <div class="question-box" id="question-box"></div>
  <div id="result"></div>
  <div id="score"></div>
  <div class="button-group">
    <button id="next-btn" onclick="nextQuestion()">下一題</button>
    <button onclick="resetQuiz()">重新開始</button>
  </div>

  <script>
    const questionBanks = {
      "監獄行刑法": [
        {
          question: "相較於傳統監獄行刑之目的，彰顯現行監獄行刑法「第 1 條」之基本精神及其立法之「積極目的」 ，下列組合何者正確？", //第1題
          options: ["修復、嚇阻", "隔離、應報", "矯治、教化", "懲罰、痛苦"],
          answer: 2,
          explanation: ""
        },
        {
          question: "由監獄行刑法第三條之規定中，可知下列何者為監獄中執行之例外？",
          options: ["拘役", "有期徒刑", "無期徒刑", "死刑"],
          answer: 3,
          explanation: "監獄為執行自由刑之場所，徒刑拘役為自由刑。死刑並非自由刑。"
        },
        {
          question: "依據監獄行刑法，下列敘述何者錯誤？",
          options: ["監獄行刑法之主管機關為法務部", "監獄之監督機關為法務部矯正署", "監獄之監督機關應派員視察監獄，每月至少一次", "少年法院法官、檢察官執行刑罰有關事項，得隨時訪視少年矯正學校、監獄"],
          answer: 2,
          explanation: "根據《監獄行刑法》，監督機關應派員視察監獄，每季至少一次。"
        },
        {
"question": "依據監獄行刑法以及相關法規之規定，下列敘述何者正確？",
"options": ["未滿十八歲之少年受刑人，應收容於少年矯正學校，且毋庸按其性別分別收容", "收容中滿十八歲而殘餘刑期未滿三個月者，得繼續收容於少年矯正學校", "滿十八歲之少年受刑人，得依其教育需要，收容於少年矯正學校至滿二十二歲為止", "監獄行刑法所稱少年受刑人，指受法院裁判時未滿十八歲之受刑人"],
"answer": 1,
"explanation": "監刑法第4條。"
},
        {
"question": "依據監獄行刑法以及相關法規之規定，下列敘述何者正確？",
"options": ["未滿十八歲之少年受刑人，應收容於少年矯正學校，且毋庸按其性別分別收容", "收容中滿十八歲而殘餘刑期未滿三個月者，得繼續收容於少年矯正學校", "滿十八歲之少年受刑人，得依其教育需要，收容於少年矯正學校至滿二十二歲為止", "監獄行刑法所稱少年受刑人，指受法院裁判時未滿十八歲之受刑人"],
"answer": 1,
"explanation": "監刑法第4條。"
},
{
"question": "受刑人甲因搶奪罪入監服刑，於民國 113 年 8 月 10 日刑期執行屆滿釋放，依監獄行刑法規定，應於何時釋放之？",
"options": ["113 年 8 月 10 日中午 12 時前", "113 年 8 月 10 日中午 12 時後", "113 年 8 月 11 日中午 12 時前", "113 年 8 月 11 日中午 12 時後"],
"answer": 0,
"explanation": "執行期滿釋放： 執行期滿者，應於其刑期終了之當日午前釋放。"
},
{
"question": "依監獄行刑法第 3 條規定，監獄行刑之對象，下列何者錯誤？",
"options": ["判處徒刑者", "罰金易服勞役者", "判處拘役者", "受裁定羈押者"],
"answer": 3,
"explanation": "依《監獄行刑法》第3條規定，監獄行刑的對象為：判處徒刑者、罰金易服勞役者、判處拘役者"
},
        {
"question": "依據監獄行刑法以及相關法規之規定，下列敘述何者錯誤？",
"options": ["監獄行刑法之主管機關與監督機關及監獄，就執行本法事項，僅應對於受刑人不利之情形，加以注意", "監獄，指法務部矯正署所屬監獄，及監獄設置之分監、女監", "監獄行刑法所稱嚴為分界，指以監內建築物、同一建築物之不同樓層或圍牆隔離監禁之", "監獄行刑法所稱分別監禁，指於監獄內之不同舍房、工場或指定之區域分別監禁之"],
"answer": 0,
"explanation": "應兼顧受刑人的權益，不應僅注意不利情形。"
},
{
"question": "據監獄行刑法以及相關法規之規定，下列敘述何者正確？",
"options": ["受刑人之接見或通信對象，監獄絕對不得予限制或禁止", "監獄應於國定例假日或其他休息日辦理接見", "監獄對於請求接見者認為有妨害監獄秩序、安全或受刑人利益時，得拒絕之", "受刑人之接見，除法規另有規定外，每星期二次，接見時間以一小時為限"],
"answer": 2,
"explanation": "監獄在認為接見可能造成不良影響時，拒絕接見請求。"
},
{
"question": "受刑人入監時，應行健康檢查，受刑人不得拒絕，監獄行刑法定有明文，當受刑人於入監時，經行健康檢查後，發現受刑人有下列那一種情形，應予拒絕收監？",
"options": ["有客觀事實足認受刑人甲身心狀況欠缺辨識能力，但仍能處理自己事務", "受刑人乙現罹患疾病", "受刑人丙患有重度身心障礙，不能於監獄自理生活", "受刑人丁懷胎四月"],
"answer": 2,
"explanation": "心神喪失或現罹疾病，因執行而有喪生之虞。懷胎五月以上，或分娩未滿二月。罹急性傳染病。衰老、身心障礙，不能自理生活。"
},
        {
"question": "監獄行刑之處所，原則上係在監獄內，但依監獄行刑法規定，刑罰雖非於監獄內執行，亦可視同在監獄內執行並予以計算刑期。關於視同在監獄內執行並予以計算刑期之敘述，下列何者錯誤？",
"options": ["受刑人在監外作業，若於指定時間內回監，在外期間算入執行刑期", "受刑人外出參加公益或教化活動並依時回監，在外期間予以計算刑期", "受刑人奉准返家奔喪並依限返監，在外期間予以計算刑期", "因天災、事變而暫行釋放之受刑人，釋放後六十小時內，未到指定地點報到，在外期間予以計算刑期"],
"answer": 3,
"explanation": "離監時起限四十八小時內"
},
{
"question": "為紓解監獄嚴重超額狀態，依監獄行刑法及監獄受刑人移監作業辦法，當監獄受刑人人數嚴重超額時， 法務部矯正署視各監獄收容之實際狀況，必要時得機動調整移監，將嚴重超額監獄收容之受刑人移送至其他監獄收容。所謂嚴重超額，下列敘述何者正確？",
"options": ["監獄實際收容人數逾核定容額百分之五", "監獄實際收容人數逾核定容額百分之十", "監獄實際收容人數逾核定容額百分之十五", "監獄實際收容人數逾核定容額百分之二十"],
"answer": 3,
"explanation": "移監作業辦法，關於「嚴重超額」的定義為：逾核定容額百分之二十"
},
{
"question": "行刑累進處遇之設計是由嚴而寬的階段性處遇，有關於該制度之設計目的，下列何者沒有直接關聯？",
"options": ["促進受刑人衛生保健習慣，提升監獄環境整潔", "促使受刑人保持善行，遵守紀律", "促進更生，培養作業技能", "實現個別化處遇原則，提升社會適應能力"],
"answer": 0,
"explanation": "雖然監獄管理中衛生保健與環境整潔很重要，但是與累進處遇制度的設計目的，沒有直接關聯。"
},
        {
    question: "當受刑人在監有危害監獄安全或其安全有受到危害之虞時，依法得施以隔離保護，有關隔離保護之敘述，下列何者正確？",
    options: [
      "受刑人被施以隔離保護期間得限制或禁止持有或使用衣被、盥洗用具及電器物品，並得禁止吸菸及暫停作業",
      "施以隔離保護應由機關人員填寫報告表並經核准後，始得為之。但緊急時，得先行實施，並立即報告機關長官",
      "施以隔離保護後，每滿 7 日機關應安排醫事人員進行訪視。必要時，亦得隨時訪視並進行評估",
      "施以隔離保護後，其輔導、給養、衛生醫療、運動、接見通信及其他必要之處遇，仍應與一般受刑人有所區別"
    ],
    answer: 1,
    explanation: "依監獄行刑相關規定，緊急時可先行隔離保護，並立即報告機關長官，為正確選項。"
  },
  {
    question: "甲因無期徒刑，在監執行許久，在知悉所報請之假釋案經不予許可後，在舍房內情緒失控、瘋狂怒吼而有自殘可能，已影響囚情甚鉅，監所管理員乙經請示監獄長官後，准予施以固定保護，下列敘述何者錯誤？",
    options: [
      "固定保護是一種暫時性處置措施，每次最長不得逾 4 小時",
      "原則上應將甲固定保護於病（推）床，但病床已滿，亦得固定於擔架",
      "施以固定保護，應由監獄人員為之",
      "甲被施以固定保護，得以保護性約束工具，拘束受刑人身體或四肢"
    ],
    answer: 1,
    explanation: "依規定應固定於病床，若病床已滿不得以擔架代替，故選項 B 錯誤。"
  },
  {
    question: "為提升受刑人謀生技能，有助於復歸社會，受刑人在監一律強制參加作業但也有例外情形，就此例外情形，下列敘述何者錯誤？",
    options: [
      "受刑人罹患疾病，得不參加作業",
      "受刑人受和緩處遇原因消滅，得不參加作業",
      "受刑人於入監調查期間，得不參加作業",
      "受刑人有妨害戒護安全之情形，得不參加作業"
    ],
    answer: 1,
    explanation: "受刑人受和緩處遇原因消滅後，應恢復作業義務，故選項 B 錯誤。"
  },
  {
    question: "依行刑累進處遇條例之規定，各級受刑人得准其於每月所得作業勞作金中，可自由使用之範圍，下列敘述何者錯誤？",
    options: [
      "第四級受刑人於五分之一範圍內，自由使用",
      "第三級受刑人於四分之一範圍內，自由使用",
      "第二級受刑人於三分之一範圍內，自由使用",
      "第一級受刑人，自由使用範圍，沒有特別限制"
    ],
    answer: 3,
    explanation: "第一級受刑人仍有限制自由使用比例，並非無特別限制。"
  },
  {
    question: "依據監獄行刑法以及相關法規之規定，下列敘述何者錯誤？",
    options: [
      "監獄人員執行職務應尊重受刑人之尊嚴及維護其人權，不得逾越所欲達成矯治處遇目的之必要限度",
      "監獄得對受刑人施以逾十五日之單獨監禁",
      "監獄應以積極適當之方式及措施，使受刑人瞭解其所受處遇及刑罰執行之目的",
      "監獄應保障身心障礙受刑人在監獄內之無障礙權益，並採取適當措施為合理調整"
    ],
    answer: 1,
    explanation: "依監獄行刑法規定，單獨監禁不得超過 15 日，故 B 錯誤。"
  },
          {
    question: "依據監獄行刑法以及相關法規之規定，下列敘述何者正確？",
    options: [
      "為落實透明化原則，保障受刑人權益，監獄應設獨立之外部視察小組，置委員三人至七人，任期二年，均為有給職，由監督機關陳報法務部核定後遴聘之",
      "監獄應設之獨立外部視察小組的委員，應就法律、醫學、公共衛生、心理、犯罪防治或人權領域之 專家學者遴選之。其中任一性別委員比例不予限制",
      "監獄應設之獨立外部視察小組應就監獄運作及受刑人權益等相關事項，進行視察並每月提出報告， 由監獄經監督機關陳報法務部備查，並以適當方式公開，由相關權責機關回應處理之",
      "監獄得依媒體之請求，同意其進入適當處所採訪或參觀；並得依民眾之請求，同意其進入適當處所參觀"
    ],
    answer: 3,
    explanation: "依《監獄行刑法》第7條，媒體與民眾經同意可進入適當處所採訪或參觀。"
  },
  {
    question: "依據監獄行刑法以及相關法規之規定，有關受刑人入監的敘述，下列敘述何者錯誤？",
    options: [
      "受刑人入監時，指揮執行之檢察署應將指揮書附具裁判書及其他應備文件，以書面、電子傳輸或其他適當方式送交監獄",
      "受刑人入監時，無指揮書者，仍應收監，但通知檢察署補正。",
      "對於新入監者，應就其個性、身心狀況、經歷、教育程度及其他相關事項，加以調查。",
      "於少年受刑人入少年矯正學校或監獄時，其應備文件除指揮書附具裁判書及其他應備文件外，尚應 包括其犯罪原因、動機、境遇、學歷、經歷、身心狀況及可供處遇之參考事項。"
    ],
    answer: 1,
    explanation: "無指揮書者不得收監，應依法律程序補齊始可收監，B 錯誤。"
  },
  {
    question: "依據監獄行刑法以及相關法規之規定，下列敘述何者正確？",
    options: [
      "為保護受刑人個人資料之安全，監獄不得蒐集、調查與受刑人有關之資料",
      "為達到矯治處遇之目的，監獄應調查與受刑人有關之資料",
      "為調查與受刑人有關之資料，以達到矯治處遇之目的，得無限制地蒐集、處理或利用受刑人之個人資料",
      "為調查與受刑人有關之資料，以達到矯治處遇之目的，得請求機關（構）、法人、團體或個人提供相關資料，機關（構）、法人、團體或個人即使有正當理由，亦不得拒絕"
    ],
    answer: 1,
    explanation: "為矯治目的，監獄應依法調查與受刑人有關資料，並符合個資法規定。"
  },
  {
    question: "依據監獄行刑法以及相關法規之規定，下列敘述何者正確？",
    options: [
      "對於新入監者，應就其個性、身心狀況、經歷、教育程度及其他相關事項，加以調查。但以判決書所載之範圍為之",
      "入監之新收調查期間，不得逾一個月",
      "監獄應於受刑人入監後六個月內，依其入監調查所得之資料，訂定其個別處遇計畫，並適時修正",
      "入監之新收調查期間，不得逾二個月"
    ],
    answer: 3,
    explanation: "《監獄行刑法》第27條之2規定，新收調查期間不得逾二個月。"
  }
      ],
      "刑法": [
        {
          question: "刑法上所謂的故意，是指行為人對於構成要件該當事實具有何種心理狀態？",
          options: ["疏忽", "明知並希望", "不知情", "過失"],
          answer: 1,
          explanation: "刑法中的故意，包含直接故意與間接故意，皆需有明知且希望或放任。"
        }
      ],
      "法學緒論": [
        {
          question: "下列何者非屬法律的特徵？",
          options: ["普遍性", "強制性", "地方性", "規範性"],
          answer: 2,
          explanation: "法律具備普遍、規範、強制等特性，地方性非本質特徵。"
        }
      ],
      "犯罪學": [
        {
          question: "差別接觸理論的重點在於？",
          options: ["生理因素", "家庭教養", "與犯罪者互動", "遺傳影響"],
          answer: 2,
          explanation: "差別接觸理論認為與犯罪者頻繁互動會學習到犯罪行為。"
        }
      ],
      "監獄學": [
        {
          question: "監獄學中，改革派監獄的重點為何？",
          options: ["強調隔離", "強調報復", "重視教育與改造", "執行死刑"],
          answer: 2,
          explanation: "改革派強調教育、工作及改造受刑人，使其復歸社會。"
        }
      ]
    };

    const maxQuestions = 50;  // 答題限制50題

    let currentSubject = "監獄行刑法";
    let currentQuestions = [];
    let currentQuestionIndex = 0;
    let correctCount = 0;
    let wrongCount = 0;
    let completedCount = 0;
    let scorePoints = 0;
    let quizEnded = false;

    const subjectSelect = document.getElementById("subject-select");
    const questionBox = document.getElementById("question-box");
    const result = document.getElementById("result");
    const score = document.getElementById("score");
    const nextBtn = document.getElementById("next-btn");

    subjectSelect.addEventListener("change", function () {
      currentSubject = this.value;
      resetQuiz();
    });

    function loadQuestions() {
      // 從該科目題庫複製題目
      currentQuestions = [...questionBanks[currentSubject]];
      shuffleArray(currentQuestions);

      // 如果題目數少於50題，重複合併補足至50題
      while(currentQuestions.length < maxQuestions){
        currentQuestions = currentQuestions.concat([...questionBanks[currentSubject]]);
        shuffleArray(currentQuestions);
      }
      // 取前50題
      currentQuestions = currentQuestions.slice(0, maxQuestions);

      currentQuestionIndex = 0;
      correctCount = 0;
      wrongCount = 0;
      completedCount = 0;
      scorePoints = 0;
      quizEnded = false;
      nextBtn.disabled = false;
      showQuestion();
    }

    function showQuestion() {
      questionBox.innerHTML = "";
      result.textContent = "";
      updateScore();

      if (quizEnded) {
        questionBox.innerHTML = `<p>答題結束！總分：${scorePoints} 分 (每題答對得 2 分)</p>`;
        return;
      }

      if (currentQuestionIndex >= currentQuestions.length) {
        // 安全備案：理論上不會超過 maxQuestions
        questionBox.innerHTML = "<p>本科目題目已完成。</p>";
        return;
      }

      const q = currentQuestions[currentQuestionIndex];
      const questionEl = document.createElement("div");
      questionEl.innerHTML = `<strong>Q${currentQuestionIndex + 1}：</strong>${q.question}`;
      questionBox.appendChild(questionEl);

      const optionIndexes = [0, 1, 2, 3];
      shuffleArray(optionIndexes);

      optionIndexes.forEach(i => {
        const btn = document.createElement("div");
        btn.className = "option";
        btn.textContent = q.options[i];
        btn.addEventListener("click", () => {
          if (quizEnded) return;
          const allOptions = document.querySelectorAll(".option");
          allOptions.forEach(el => el.style.pointerEvents = "none");

          if (i === q.answer) {
            btn.classList.add("correct");
            correctCount++;
            scorePoints += 2; // 答對加2分
          } else {
            btn.classList.add("incorrect");
            allOptions[q.answer].classList.add("correct");
            wrongCount++;
            // 答錯不扣分
          }

          completedCount++;
          result.innerHTML = `<small>解析：${q.explanation}</small>`;
          updateScore();

          // 答滿50題就結束
          if(completedCount >= maxQuestions){
            quizEnded = true;
            nextBtn.disabled = true;
            questionBox.innerHTML = `<p>答題結束！總分：${scorePoints} 分 (每題答對得 2 分)</p>`;
          }
        });
        questionBox.appendChild(btn);
      });
    }

    function nextQuestion() {
      if (quizEnded) {
        alert("答題已結束，請點「重新開始」重新開始。");
        return;
      }
      if(currentQuestionIndex < currentQuestions.length - 1){
        currentQuestionIndex++;
        showQuestion();
      } else {
        alert("已完成所有題目");
      }
    }

    function resetQuiz() {
      loadQuestions();
    }

    function updateScore() {
      score.textContent = `✔️ 答對：${correctCount} 題　❌ 答錯：${wrongCount} 題　📘 已完成 ${completedCount}/${maxQuestions}`;
    }

    function shuffleArray(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }

    loadQuestions();
  </script>
</body>
</html>
