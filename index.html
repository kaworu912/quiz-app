<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>多科目答題系統</title>
  <style>
    body {
      font-family: sans-serif;
      font-size: 14px;
      padding: 10px;
      line-height: 1.6;
      max-width: 600px;
      margin: auto;
    }
    h2 {
      font-size: 14px;
    }
    label, select {
      font-size: 14px;
    }
    select, button {
      padding: 6px 10px;
      margin: 8px 0;
      border-radius: 4px;
      border: 1px solid #ccc;
      cursor: pointer;
      font-size: 14px;
    }
    .question-box {
      margin-top: 20px;
      font-size: 18px;
    }
    .option {
      display: block;
      margin: 8px 0;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 5px;
      background-color: #f9f9f9;
      cursor: pointer;
      font-size: 18px;
      user-select: none;
    }
    .option.correct {
      background-color: #d4edda;
      border-color: #c3e6cb;
    }
    .option.incorrect {
      background-color: #f8d7da;
      border-color: #f5c6cb;
    }
    #result {
      margin-top: 15px;
      font-weight: bold;
      font-size: 14px;
    }
    #score {
      margin-top: 5px;
      font-size: 14px;
    }
    .button-group {
      margin-top: 10px;
    }
    .button-group button:last-child {
      margin-left: 30px;
    }
  </style>
</head>
<body>
  <h2>答題系統（多科目）</h2>

  <label for="subject-select">請選擇科目：</label>
  <select id="subject-select">
    <option value="監獄行刑法">監獄行刑法</option>
    <option value="刑法">刑法</option>
    <option value="法學緒論">法學緒論</option>
    <option value="犯罪學">犯罪學</option>
    <option value="監獄學">監獄學</option>
  </select>

  <div class="question-box" id="question-box"></div>
  <div id="result"></div>
  <div id="score"></div>
  <div class="button-group">
    <button onclick="nextQuestion()">下一題</button>
    <button onclick="resetQuiz()">重新開始</button>
  </div>

  <script>
    const questionBanks = {
      "監獄行刑法": [
        {
          question: "下列何者並非我國監獄行刑之積極目的？",
          options: ["改悔向上", "監禁處遇", "培養其適應社會生活之能力", "以上皆是"],
          answer: 1,
          explanation: "監禁處遇是手段，不是目的。"
        },
        {
          question: "由監獄行刑法第三條之規定中，可知下列何者為監獄中執行之例外？",
          options: ["拘役", "有期徒刑", "無期徒刑", "死刑"],
          answer: 3,
          explanation: "死刑並非自由刑，因此不在監獄中執行。"
        },
                {
          "question": "依據監獄行刑法第三條，處徒刑、拘役及罰金易服勞役之受刑人，除法律別有規定外在監獄內執行之，下列選項何者為法律例外情況？",
          "options": ["本法27條之暫時釋放", "本法63條之保外醫治", "本法29日間外出", "以上皆是"],
          "answer": 3,
          "explanation": "以上皆屬例外情況，可不在監獄內執行。"
        }
      ],
      "刑法": [
        {
          question: "刑法上所謂的故意，是指行為人對於構成要件該當事實具有何種心理狀態？",
          options: ["疏忽", "明知並希望", "不知情", "過失"],
          answer: 1,
          explanation: "故意包括明知並希望或放任結果的發生。"
        },
        {
          question: "刑法第19條規定有關心神喪失者的責任，下列敘述何者正確？",
          options: ["完全免除其刑事責任", "減輕其刑", "得加重其刑", "無關責任"],
          answer: 0,
          explanation: "完全心神喪失者不負刑事責任。"
        }
      ],
      "法學緒論": [
        {
          question: "下列何者非屬法律的特徵？",
          options: ["普遍性", "強制性", "地方性", "規範性"],
          answer: 2,
          explanation: "地方性不是法律的普遍特徵，而是地方法規的性質。"
        },
        {
          question: "法學上所稱的「實體法」，主要規範什麼？",
          options: ["訴訟程序", "權利義務內容", "法院組織", "管轄權"],
          answer: 1,
          explanation: "實體法規範的是權利義務的實際內容。"
        }
      ],
      "犯罪學": [
        {
          question: "差別接觸理論的重點在於？",
          options: ["生理因素", "家庭教養", "與犯罪者互動", "遺傳影響"],
          answer: 2,
          explanation: "與犯罪者接觸越多，越可能學習犯罪行為。"
        },
        {
          question: "下列何者屬於社會控制理論的主張？",
          options: ["犯罪源於學習", "社會聯結越強，越不易犯罪", "犯罪天生具備", "人格缺陷"],
          answer: 1,
          explanation: "社會控制理論強調聯結強會減少犯罪傾向。"
        }
      ],
      "監獄學": [
        {
          question: "監獄學中，改革派監獄的重點為何？",
          options: ["強調隔離", "強調報復", "重視教育與改造", "執行死刑"],
          answer: 2,
          explanation: "改革派強調透過教育與改造幫助受刑人復歸社會。"
        },
        {
          question: "根據監獄學的分類，總體設施監獄的特色是？",
          options: ["高度自由", "高科技管理", "全封閉且集中管理", "以網路監控為主"],
          answer: 2,
          explanation: "總體設施監獄具有高度安全與集中式管理的特性。"
        }
      ]
    };

    let currentSubject = "監獄行刑法";
    let currentQuestions = [];
    let currentQuestionIndex = 0;
    let correctCount = 0;
    let wrongCount = 0;

    const subjectSelect = document.getElementById("subject-select");
    const questionBox = document.getElementById("question-box");
    const result = document.getElementById("result");
    const score = document.getElementById("score");

    subjectSelect.addEventListener("change", function() {
      currentSubject = this.value;
      resetQuiz();
    });

    function loadQuestions() {
      currentQuestions = [...questionBanks[currentSubject]];
      shuffleArray(currentQuestions);
      currentQuestionIndex = 0;
      correctCount = 0;
      wrongCount = 0;
      showQuestion();
    }

    function showQuestion() {
      questionBox.innerHTML = "";
      result.textContent = "";
      score.textContent = `✔️ 答對：${correctCount} 題　❌ 答錯：${wrongCount} 題`;

      if (currentQuestionIndex >= currentQuestions.length) {
        questionBox.innerHTML = "<p>本科目題目已完成。</p>";
        return;
      }

      const q = currentQuestions[currentQuestionIndex];
      const questionEl = document.createElement("div");
      questionEl.innerHTML = `<strong>Q${currentQuestionIndex + 1}：</strong>${q.question}`;
      questionBox.appendChild(questionEl);

      const optionIndexes = [0, 1, 2, 3];
      shuffleArray(optionIndexes);

      optionIndexes.forEach(i => {
        const btn = document.createElement("div");
        btn.className = "option";
        btn.textContent = q.options[i]; // 不顯示 ABCD
        btn.addEventListener("click", () => {
          const allOptions = document.querySelectorAll(".option");
          allOptions.forEach(el => el.style.pointerEvents = "none");

          if (i === q.answer) {
            btn.classList.add("correct");
            result.textContent = `答對了！ (${currentQuestionIndex + 1}/${currentQuestions.length})`;
            correctCount++;
          } else {
            btn.classList.add("incorrect");
            allOptions[q.answer].classList.add("correct");
            result.textContent = `答錯了！ (${currentQuestionIndex + 1}/${currentQuestions.length})`;
            wrongCount++;
          }

          result.innerHTML += `<br><small>解析：${q.explanation}</small>`;
          score.textContent = `✔️ 答對：${correctCount} 題　❌ 答錯：${wrongCount} 題`;
        });
        questionBox.appendChild(btn);
      });
    }

    function nextQuestion() {
      currentQuestionIndex++;
      showQuestion();
    }

    function resetQuiz() {
      loadQuestions();
    }

    function shuffleArray(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }

    loadQuestions();
  </script>
</body>
</html>
